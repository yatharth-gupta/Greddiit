{"ast":null,"code":"import { HttpRequest } from \"@aws-sdk/protocol-http\";\nconst TRACE_ID_HEADER_NAME = \"X-Amzn-Trace-Id\";\nconst ENV_LAMBDA_FUNCTION_NAME = \"AWS_LAMBDA_FUNCTION_NAME\";\nconst ENV_TRACE_ID = \"_X_AMZN_TRACE_ID\";\nexport const recursionDetectionMiddleware = options => next => async args => {\n  const {\n    request\n  } = args;\n  if (!HttpRequest.isInstance(request) || options.runtime !== \"node\" || request.headers.hasOwnProperty(TRACE_ID_HEADER_NAME)) {\n    return next(args);\n  }\n  const functionName = process.env[ENV_LAMBDA_FUNCTION_NAME];\n  const traceId = process.env[ENV_TRACE_ID];\n  const nonEmptyString = str => typeof str === \"string\" && str.length > 0;\n  if (nonEmptyString(functionName) && nonEmptyString(traceId)) {\n    request.headers[TRACE_ID_HEADER_NAME] = traceId;\n  }\n  return next({\n    ...args,\n    request\n  });\n};\nexport const addRecursionDetectionMiddlewareOptions = {\n  step: \"build\",\n  tags: [\"RECURSION_DETECTION\"],\n  name: \"recursionDetectionMiddleware\",\n  override: true,\n  priority: \"low\"\n};\nexport const getRecursionDetectionPlugin = options => ({\n  applyToStack: clientStack => {\n    clientStack.add(recursionDetectionMiddleware(options), addRecursionDetectionMiddlewareOptions);\n  }\n});","map":{"version":3,"names":["HttpRequest","TRACE_ID_HEADER_NAME","ENV_LAMBDA_FUNCTION_NAME","ENV_TRACE_ID","recursionDetectionMiddleware","options","next","args","request","isInstance","runtime","headers","hasOwnProperty","functionName","process","env","traceId","nonEmptyString","str","length","addRecursionDetectionMiddlewareOptions","step","tags","name","override","priority","getRecursionDetectionPlugin","applyToStack","clientStack","add"],"sources":["/home/yatharth/Desktop/sem_4/DASS/assignment_1/my-app/node_modules/@aws-sdk/middleware-recursion-detection/dist-es/index.js"],"sourcesContent":["import { HttpRequest } from \"@aws-sdk/protocol-http\";\nconst TRACE_ID_HEADER_NAME = \"X-Amzn-Trace-Id\";\nconst ENV_LAMBDA_FUNCTION_NAME = \"AWS_LAMBDA_FUNCTION_NAME\";\nconst ENV_TRACE_ID = \"_X_AMZN_TRACE_ID\";\nexport const recursionDetectionMiddleware = (options) => (next) => async (args) => {\n    const { request } = args;\n    if (!HttpRequest.isInstance(request) ||\n        options.runtime !== \"node\" ||\n        request.headers.hasOwnProperty(TRACE_ID_HEADER_NAME)) {\n        return next(args);\n    }\n    const functionName = process.env[ENV_LAMBDA_FUNCTION_NAME];\n    const traceId = process.env[ENV_TRACE_ID];\n    const nonEmptyString = (str) => typeof str === \"string\" && str.length > 0;\n    if (nonEmptyString(functionName) && nonEmptyString(traceId)) {\n        request.headers[TRACE_ID_HEADER_NAME] = traceId;\n    }\n    return next({\n        ...args,\n        request,\n    });\n};\nexport const addRecursionDetectionMiddlewareOptions = {\n    step: \"build\",\n    tags: [\"RECURSION_DETECTION\"],\n    name: \"recursionDetectionMiddleware\",\n    override: true,\n    priority: \"low\",\n};\nexport const getRecursionDetectionPlugin = (options) => ({\n    applyToStack: (clientStack) => {\n        clientStack.add(recursionDetectionMiddleware(options), addRecursionDetectionMiddlewareOptions);\n    },\n});\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,wBAAwB;AACpD,MAAMC,oBAAoB,GAAG,iBAAiB;AAC9C,MAAMC,wBAAwB,GAAG,0BAA0B;AAC3D,MAAMC,YAAY,GAAG,kBAAkB;AACvC,OAAO,MAAMC,4BAA4B,GAAIC,OAAO,IAAMC,IAAI,IAAK,MAAOC,IAAI,IAAK;EAC/E,MAAM;IAAEC;EAAQ,CAAC,GAAGD,IAAI;EACxB,IAAI,CAACP,WAAW,CAACS,UAAU,CAACD,OAAO,CAAC,IAChCH,OAAO,CAACK,OAAO,KAAK,MAAM,IAC1BF,OAAO,CAACG,OAAO,CAACC,cAAc,CAACX,oBAAoB,CAAC,EAAE;IACtD,OAAOK,IAAI,CAACC,IAAI,CAAC;EACrB;EACA,MAAMM,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACb,wBAAwB,CAAC;EAC1D,MAAMc,OAAO,GAAGF,OAAO,CAACC,GAAG,CAACZ,YAAY,CAAC;EACzC,MAAMc,cAAc,GAAIC,GAAG,IAAK,OAAOA,GAAG,KAAK,QAAQ,IAAIA,GAAG,CAACC,MAAM,GAAG,CAAC;EACzE,IAAIF,cAAc,CAACJ,YAAY,CAAC,IAAII,cAAc,CAACD,OAAO,CAAC,EAAE;IACzDR,OAAO,CAACG,OAAO,CAACV,oBAAoB,CAAC,GAAGe,OAAO;EACnD;EACA,OAAOV,IAAI,CAAC;IACR,GAAGC,IAAI;IACPC;EACJ,CAAC,CAAC;AACN,CAAC;AACD,OAAO,MAAMY,sCAAsC,GAAG;EAClDC,IAAI,EAAE,OAAO;EACbC,IAAI,EAAE,CAAC,qBAAqB,CAAC;EAC7BC,IAAI,EAAE,8BAA8B;EACpCC,QAAQ,EAAE,IAAI;EACdC,QAAQ,EAAE;AACd,CAAC;AACD,OAAO,MAAMC,2BAA2B,GAAIrB,OAAO,KAAM;EACrDsB,YAAY,EAAGC,WAAW,IAAK;IAC3BA,WAAW,CAACC,GAAG,CAACzB,4BAA4B,CAACC,OAAO,CAAC,EAAEe,sCAAsC,CAAC;EAClG;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}