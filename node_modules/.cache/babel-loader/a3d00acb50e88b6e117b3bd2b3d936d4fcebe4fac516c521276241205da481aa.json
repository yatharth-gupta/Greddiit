{"ast":null,"code":"//TODO: handle comments\nfunction readDocType(xmlData, i) {\n  const entities = {};\n  if (xmlData[i + 3] === 'O' && xmlData[i + 4] === 'C' && xmlData[i + 5] === 'T' && xmlData[i + 6] === 'Y' && xmlData[i + 7] === 'P' && xmlData[i + 8] === 'E') {\n    i = i + 9;\n    let angleBracketsCount = 1;\n    let hasBody = false,\n      entity = false,\n      comment = false;\n    let exp = \"\";\n    for (; i < xmlData.length; i++) {\n      if (xmlData[i] === '<') {\n        if (hasBody && xmlData[i + 1] === '!' && xmlData[i + 2] === 'E' && xmlData[i + 3] === 'N' && xmlData[i + 4] === 'T' && xmlData[i + 5] === 'I' && xmlData[i + 6] === 'T' && xmlData[i + 7] === 'Y') {\n          i += 7;\n          entity = true;\n        } else if (hasBody && xmlData[i + 1] === '!' && xmlData[i + 2] === 'E' && xmlData[i + 3] === 'L' && xmlData[i + 4] === 'E' && xmlData[i + 5] === 'M' && xmlData[i + 6] === 'E' && xmlData[i + 7] === 'N' && xmlData[i + 8] === 'T') {\n          //Not supported\n          i += 8;\n        } else if (hasBody && xmlData[i + 1] === '!' && xmlData[i + 2] === 'A' && xmlData[i + 3] === 'T' && xmlData[i + 4] === 'T' && xmlData[i + 5] === 'L' && xmlData[i + 6] === 'I' && xmlData[i + 7] === 'S' && xmlData[i + 8] === 'T') {\n          //Not supported\n          i += 8;\n        } else if (hasBody && xmlData[i + 1] === '!' && xmlData[i + 2] === 'N' && xmlData[i + 3] === 'O' && xmlData[i + 4] === 'T' && xmlData[i + 5] === 'A' && xmlData[i + 6] === 'T' && xmlData[i + 7] === 'I' && xmlData[i + 8] === 'O' && xmlData[i + 9] === 'N') {\n          //Not supported\n          i += 9;\n        } else if (\n        //comment\n        xmlData[i + 1] === '!' && xmlData[i + 2] === '-' && xmlData[i + 3] === '-') {\n          comment = true;\n        } else {\n          throw new Error(\"Invalid DOCTYPE\");\n        }\n        angleBracketsCount++;\n        exp = \"\";\n      } else if (xmlData[i] === '>') {\n        if (comment) {\n          if (xmlData[i - 1] === \"-\" && xmlData[i - 2] === \"-\") {\n            comment = false;\n          } else {\n            throw new Error(`Invalid XML comment in DOCTYPE`);\n          }\n        } else if (entity) {\n          parseEntityExp(exp, entities);\n          entity = false;\n        }\n        angleBracketsCount--;\n        if (angleBracketsCount === 0) {\n          break;\n        }\n      } else if (xmlData[i] === '[') {\n        hasBody = true;\n      } else {\n        exp += xmlData[i];\n      }\n    }\n    if (angleBracketsCount !== 0) {\n      throw new Error(`Unclosed DOCTYPE`);\n    }\n  } else {\n    throw new Error(`Invalid Tag instead of DOCTYPE`);\n  }\n  return {\n    entities,\n    i\n  };\n}\nconst entityRegex = RegExp(\"^\\\\s([a-zA-z0-0]+)[ \\t](['\\\"])([^&]+)\\\\2\");\nfunction parseEntityExp(exp, entities) {\n  const match = entityRegex.exec(exp);\n  if (match) {\n    entities[match[1]] = {\n      regx: RegExp(`&${match[1]};`, \"g\"),\n      val: match[3]\n    };\n  }\n}\nmodule.exports = readDocType;","map":{"version":3,"names":["readDocType","xmlData","i","entities","angleBracketsCount","hasBody","entity","comment","exp","length","Error","parseEntityExp","entityRegex","RegExp","match","exec","regx","val","module","exports"],"sources":["/home/yatharth/Desktop/sem_4/DASS/assignment_1/my-app/node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js"],"sourcesContent":["//TODO: handle comments\nfunction readDocType(xmlData, i){\n    \n    const entities = {};\n    if( xmlData[i + 3] === 'O' &&\n         xmlData[i + 4] === 'C' &&\n         xmlData[i + 5] === 'T' &&\n         xmlData[i + 6] === 'Y' &&\n         xmlData[i + 7] === 'P' &&\n         xmlData[i + 8] === 'E')\n    {    \n        i = i+9;\n        let angleBracketsCount = 1;\n        let hasBody = false, entity = false, comment = false;\n        let exp = \"\";\n        for(;i<xmlData.length;i++){\n            if (xmlData[i] === '<') {\n                if( hasBody && \n                     xmlData[i+1] === '!' &&\n                     xmlData[i+2] === 'E' &&\n                     xmlData[i+3] === 'N' &&\n                     xmlData[i+4] === 'T' &&\n                     xmlData[i+5] === 'I' &&\n                     xmlData[i+6] === 'T' &&\n                     xmlData[i+7] === 'Y'\n                ){\n                    i += 7;\n                    entity = true;\n                }else if( hasBody && \n                    xmlData[i+1] === '!' &&\n                     xmlData[i+2] === 'E' &&\n                     xmlData[i+3] === 'L' &&\n                     xmlData[i+4] === 'E' &&\n                     xmlData[i+5] === 'M' &&\n                     xmlData[i+6] === 'E' &&\n                     xmlData[i+7] === 'N' &&\n                     xmlData[i+8] === 'T'\n                ){\n                    //Not supported\n                    i += 8;\n                }else if( hasBody && \n                    xmlData[i+1] === '!' &&\n                    xmlData[i+2] === 'A' &&\n                    xmlData[i+3] === 'T' &&\n                    xmlData[i+4] === 'T' &&\n                    xmlData[i+5] === 'L' &&\n                    xmlData[i+6] === 'I' &&\n                    xmlData[i+7] === 'S' &&\n                    xmlData[i+8] === 'T'\n                ){\n                    //Not supported\n                    i += 8;\n                }else if( hasBody && \n                    xmlData[i+1] === '!' &&\n                    xmlData[i+2] === 'N' &&\n                    xmlData[i+3] === 'O' &&\n                    xmlData[i+4] === 'T' &&\n                    xmlData[i+5] === 'A' &&\n                    xmlData[i+6] === 'T' &&\n                    xmlData[i+7] === 'I' &&\n                    xmlData[i+8] === 'O' &&\n                    xmlData[i+9] === 'N'\n                ){\n                    //Not supported\n                    i += 9;\n                }else if( //comment\n                    xmlData[i+1] === '!' &&\n                    xmlData[i+2] === '-' &&\n                    xmlData[i+3] === '-'\n                ){\n                    comment = true;\n                }else{\n                    throw new Error(\"Invalid DOCTYPE\");\n                }\n                angleBracketsCount++;\n                exp = \"\";\n            } else if (xmlData[i] === '>') {\n                if(comment){\n                    if( xmlData[i - 1] === \"-\" && xmlData[i - 2] === \"-\"){\n                        comment = false;\n                    }else{\n                        throw new Error(`Invalid XML comment in DOCTYPE`);\n                    }\n                }else if(entity){\n                    parseEntityExp(exp, entities);\n                    entity = false;\n                }\n                angleBracketsCount--;\n                if (angleBracketsCount === 0) {\n                  break;\n                }\n            }else if( xmlData[i] === '['){\n                hasBody = true;\n            }else{\n                exp += xmlData[i];\n            }\n        }\n        if(angleBracketsCount !== 0){\n            throw new Error(`Unclosed DOCTYPE`);\n        }\n    }else{\n        throw new Error(`Invalid Tag instead of DOCTYPE`);\n    }\n    return {entities, i};\n}\n\nconst entityRegex = RegExp(\"^\\\\s([a-zA-z0-0]+)[ \\t](['\\\"])([^&]+)\\\\2\");\nfunction parseEntityExp(exp, entities){\n    const match = entityRegex.exec(exp);\n    if(match){\n        entities[ match[1] ] = {\n            regx : RegExp( `&${match[1]};`,\"g\"),\n            val: match[3]\n        };\n    }\n}\nmodule.exports = readDocType;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}